
PS C:\Users\deral\code\ccode> # --- DotTalk++ clean rebuild (Release) ---
PS C:\Users\deral\code\ccode> # Paste this whole block into a fresh PowerShell window
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # Settings
PS C:\Users\deral\code\ccode> $Repo = "C:\Users\deral\code\ccode"
PS C:\Users\deral\code\ccode> $BuildDir = Join-Path $Repo "build"
PS C:\Users\deral\code\ccode> $Config = "Release"   # change to "Debug" if you prefer
PS C:\Users\deral\code\ccode> $Target = "dottalkpp" # CLI target name
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> Set-StrictMode -Version Latest
PS C:\Users\deral\code\ccode> $ErrorActionPreference = "Stop"
PS C:\Users\deral\code\ccode> Write-Host ">>> Preparing environment..." -ForegroundColor Cyan
>>> Preparing environment...
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 1) Kill common VS/ServiceHub file lockers (leave Office & browsers alone)
PS C:\Users\deral\code\ccode> $lockers = @(
>>   "devenv", "MSBuild", "VCTIP", "VCToolsService",
>>   "ServiceHub.Host", "ServiceHub.VSDetouredHost",
>>   "ServiceHub.RoslynCodeAnalysisService",
>>   "ServiceHub.Intellicode", "ServiceHub.IdentityHost"
>> )
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> foreach ($name in $lockers) {
>>   Get-Process -Name $name -ErrorAction SilentlyContinue | ForEach-Object {
>>     Write-Host (" - Stopping {0} (PID {1})" -f $_.ProcessName, $_.Id)
>>     Stop-Process -Id $_.Id -Force -ErrorAction SilentlyContinue
>>   }
>> }
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> Start-Sleep -Seconds 1
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 2) Remove old build folder
PS C:\Users\deral\code\ccode> if (Test-Path -LiteralPath $BuildDir) {
>>   Write-Host ">>> Removing build directory: $BuildDir" -ForegroundColor Cyan
>>   Remove-Item -LiteralPath $BuildDir -Recurse -Force
>> }
>>> Removing build directory: C:\Users\deral\code\ccode\build
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 3) Optional: silence MSVC UTF-8 diagnostics for this session
PS C:\Users\deral\code\ccode> $env:CL = "/utf-8"
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 4) Reconfigure with CMake (VS 2022, x64, indexing ON)
PS C:\Users\deral\code\ccode> Write-Host ">>> CMake configure..." -ForegroundColor Cyan
>>> CMake configure...
PS C:\Users\deral\code\ccode> cmake -S $Repo -B $BuildDir -G "Visual Studio 17 2022" -A x64 -DDOTTALK_WITH_INDEX=ON
-- The CXX compiler identification is MSVC 19.44.35215.0
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.44.35207/bin/Hostx64/x64/cl.exe - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- ================================
-- Source dir : C:/Users/deral/code/ccode
-- Build dir  : C:/Users/deral/code/ccode/build
-- Layout     : INTEGRATED (no externals/)
-- CLI dir    : C:/Users/deral/code/ccode/src/cli
-- Indexing   : ON
-- ================================
-- Configuring done (6.9s)
-- Generating done (0.1s)
-- Build files have been written to: C:/Users/deral/code/ccode/build
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 5) Build target
PS C:\Users\deral\code\ccode> Write-Host ">>> Building $Target ($Config)..." -ForegroundColor Cyan
>>> Building dottalkpp (Release)...
PS C:\Users\deral\code\ccode> cmake --build $BuildDir --config $Config --target $Target
MSBuild version 17.14.19+164abd434 for .NET Framework

  1>Checking Build System
  Building Custom Rule C:/Users/deral/code/ccode/CMakeLists.txt
  attach.cpp
  bpt_backend.cpp
  bptree_backend.cpp
  common.cpp
  dbarea_adapt.cpp
  index_manager.cpp
  index_tag.cpp
  key_codec.cpp
  simple_index.cpp
C:\Users\deral\code\ccode\src\xindex\index_manager.cpp(22,13): warning C4505: 'xindex::ieq': unreferenced function with
 internal linkage has been removed [C:\Users\deral\code\ccode\build\xindex.vcxproj]
  xindex.vcxproj -> C:\Users\deral\code\ccode\build\Release\xindex.lib
  Building Custom Rule C:/Users/deral/code/ccode/CMakeLists.txt
  dbf_file.cpp
  fields.cpp
  record_view.cpp
  xbase.vcxproj -> C:\Users\deral\code\ccode\build\Release\xbase.lib
  Building Custom Rule C:/Users/deral/code/ccode/CMakeLists.txt
  cmd_append.cpp
  cmd_append_blank.cpp
  cmd_ascend.cpp
  cmd_bang.cpp
  cmd_bottom.cpp
  cmd_clear.cpp
  cmd_color.cpp
  cmd_copy.cpp
  cmd_count.cpp
  cmd_create.cpp
  cmd_delete.cpp
  cmd_descend.cpp
  cmd_dir.cpp
  cmd_display.cpp
  cmd_dump.cpp
  cmd_edit.cpp
  cmd_export.cpp
  cmd_fields.cpp
  cmd_find.cpp
  cmd_goto.cpp
  cmd_help.cpp
  cmd_import.cpp
  cmd_index.cpp
  cmd_list.cpp
  cmd_locate.cpp
  cmd_order.cpp
  cmd_pack.cpp
  cmd_recall.cpp
  cmd_recno.cpp
  cmd_refresh.cpp
  cmd_replace.cpp
  cmd_seek.cpp
  cmd_setindex.cpp
  cmd_setorder.cpp
  cmd_status.cpp
  cmd_struct.cpp
  cmd_test.cpp
  cmd_top.cpp
  cmd_use.cpp
  cmd_version.cpp
  cmd_zap.cpp
  colors.cpp
  command_registry.cpp
  console_utils.cpp
  csv.cpp
  main.cpp
  order_state.cpp
  parse.cpp
  predicates.cpp
  shell.cpp
  textio.cpp
C:\Users\deral\code\ccode\src\cli\shell.cpp(1,1): warning C4828: The file contains a character starting at offset 0xd t
hat is illegal in the current source character set (codepage 65001). [C:\Users\deral\code\ccode\build\dottalkpp.vcxproj
]
C:\Users\deral\code\ccode\src\cli\shell.cpp(1,1): warning C4828: The file contains a character starting at offset 0x21a
3 that is illegal in the current source character set (codepage 65001). [C:\Users\deral\code\ccode\build\dottalkpp.vcxp
roj]
C:\Users\deral\code\ccode\src\cli\shell.cpp(1,1): warning C4828: The file contains a character starting at offset 0x220
b that is illegal in the current source character set (codepage 65001). [C:\Users\deral\code\ccode\build\dottalkpp.vcxp
roj]
C:\Users\deral\code\ccode\src\cli\cmd_setorder.cpp(27,24): warning C4505: '`anonymous-namespace'::lower': unreferenced
function with internal linkage has been removed [C:\Users\deral\code\ccode\build\dottalkpp.vcxproj]
  dottalkpp.vcxproj -> C:\Users\deral\code\ccode\build\Release\dottalkpp.exe
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 6) Show artifact path
PS C:\Users\deral\code\ccode> $ExePath = Join-Path $BuildDir "$Config\$Target.exe"
PS C:\Users\deral\code\ccode> if (Test-Path -LiteralPath $ExePath) {
>>   Write-Host ">>> Build complete." -ForegroundColor Green
>>   Write-Host "Executable: $ExePath" -ForegroundColor Green
>> } else {
>>   throw "Build finished but $ExePath was not found."
>> }
>>> Build complete.
Executable: C:\Users\deral\code\ccode\build\Release\dottalkpp.exe
PS C:\Users\deral\code\ccode>
PS C:\Users\deral\code\ccode> # 7) (Optional) quick smoke run: open the app in a new window
PS C:\Users\deral\code\ccode> Write-Host ">>> Launching CLI (close it with QUIT)..." -ForegroundColor Cyan
>>> Launching CLI (close it with QUIT)...
PS C:\Users\deral\code\ccode> Start-Process -FilePath $ExePath
PS C:\Users\deral\code\ccode>